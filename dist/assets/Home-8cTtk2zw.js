import{_ as h,c as n,a as e,f as u,F as y,g as _,w as D,t as c,v as m,o}from"./index-9265pj74.js";const f={name:"Home",data(){return{diaries:[],showNewDiary:!1,editingIndex:-1,currentDiary:{content:"",date:""}}},created(){const t=localStorage.getItem("diaries");t&&(this.diaries=JSON.parse(t))},methods:{saveDiary(){if(!this.currentDiary.content.trim()){alert("请输入日记内容");return}const t={content:this.currentDiary.content,date:new Date().toLocaleString()};this.editingIndex===-1?this.diaries.unshift(t):this.diaries[this.editingIndex]=t,localStorage.setItem("diaries",JSON.stringify(this.diaries)),this.closeModal()},editDiary(t){this.editingIndex=t,this.currentDiary={...this.diaries[t]},this.showNewDiary=!0},deleteDiary(t){confirm("确定要删除这篇日记吗？")&&(this.diaries.splice(t,1),localStorage.setItem("diaries",JSON.stringify(this.diaries)))},closeModal(){this.showNewDiary=!1,this.editingIndex=-1,this.currentDiary={content:"",date:""}}}},v={class:"home-container"},g={class:"header"},w={class:"diary-list"},b={class:"diary-header"},k={class:"diary-date"},p={class:"diary-actions"},I=["onClick"],N=["onClick"],x={class:"diary-content"},C={key:0,class:"modal"},S={class:"modal-content"},M={class:"modal-buttons"};function B(t,s,J,O,a,r){return o(),n("div",v,[e("header",g,[s[4]||(s[4]=e("h1",null,"我的日记",-1)),e("button",{class:"cute-button",onClick:s[0]||(s[0]=i=>a.showNewDiary=!0)},"写新日记")]),e("div",w,[(o(!0),n(y,null,_(a.diaries,(i,d)=>(o(),n("div",{key:d,class:"diary-card"},[e("div",b,[e("span",k,c(i.date),1),e("div",p,[e("button",{class:"edit-btn",onClick:l=>r.editDiary(d)},"编辑",8,I),e("button",{class:"delete-btn",onClick:l=>r.deleteDiary(d)},"删除",8,N)])]),e("p",x,c(i.content),1)]))),128))]),a.showNewDiary?(o(),n("div",C,[e("div",S,[e("h2",null,c(a.editingIndex===-1?"写新日记":"编辑日记"),1),D(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=i=>a.currentDiary.content=i),class:"diary-textarea",placeholder:"写下此刻的心情...",autocomplete:"off"},null,512),[[m,a.currentDiary.content]]),e("div",M,[e("button",{class:"cute-button",onClick:s[2]||(s[2]=(...i)=>r.saveDiary&&r.saveDiary(...i))},"保存"),e("button",{class:"cancel-button",onClick:s[3]||(s[3]=(...i)=>r.closeModal&&r.closeModal(...i))},"取消")])])])):u("",!0)])}const F=h(f,[["render",B],["__scopeId","data-v-7e7a3264"]]);export{F as default};
